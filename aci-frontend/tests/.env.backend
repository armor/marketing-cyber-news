# Backend Integration Test Environment Configuration
# This file is used when running E2E tests against the real backend

# =============================================================================
# Test Mode - MUST be true for backend integration tests
# =============================================================================
USE_REAL_BACKEND=true

# =============================================================================
# URLs
# =============================================================================
# Frontend URL (Vite dev server)
TEST_BASE_URL=http://localhost:5173

# Backend API URL
TEST_API_URL=http://localhost:8080
VITE_API_URL=http://localhost:8080

# =============================================================================
# Test Credentials
# =============================================================================
# These must match users seeded in the test database
# See: aci-backend/scripts/seed-test-data.sql

# Admin user (full permissions)
TEST_ADMIN_EMAIL=admin@example.com
TEST_ADMIN_PASSWORD=AdminPass123

# Marketing user (marketing + newsletter permissions)
TEST_MARKETING_EMAIL=marketing@example.com
TEST_MARKETING_PASSWORD=MarketingPass123

# Viewer user (read-only permissions)
TEST_VIEWER_EMAIL=viewer@example.com
TEST_VIEWER_PASSWORD=ViewerPass123

# =============================================================================
# Test Configuration
# =============================================================================
# Longer timeouts for real API calls
TEST_TIMEOUT=60000
TEST_NETWORK_TIMEOUT=15000

# Screenshot on failure
SCREENSHOT_ON_FAILURE=true

# Video recording
RECORD_VIDEO=retain-on-failure

# =============================================================================
# Debugging
# =============================================================================
# Show browser window during tests
HEADLESS=true

# Slow down test execution (milliseconds) - useful for debugging
SLOW_MO=0

# Enable verbose logging
DEBUG=false

# =============================================================================
# Database Configuration (for seed script)
# =============================================================================
# Test database URL (used by seed script)
TEST_DATABASE_URL=postgresql://test:test@localhost:5433/aci_test

# =============================================================================
# Usage Instructions
# =============================================================================
# 1. Start test database:
#    docker-compose -f docker-compose.test.yml up -d postgres-test
#
# 2. Seed test data:
#    psql $TEST_DATABASE_URL -f aci-backend/scripts/seed-test-data.sql
#
# 3. Start backend:
#    cd aci-backend && go run cmd/server/main.go
#
# 4. Run backend integration tests:
#    cd aci-frontend
#    npx playwright test --project=backend-integration
#
# Or use the convenience script:
#    npm run test:e2e:backend
